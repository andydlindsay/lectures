# W10D01 - Rails Review

### To Do
- [ ] "Rails Week" Conversation
- [ ] MVC Review
- [ ] Quickly build simple Rails app
- [ ] Nested Resources

### Model View Controller Review
- **Model:** Responsible for handling data logic (eg. database queries)
- **View:** Responsible for the UI (User Interface)
- **Controller:** Ties the model and view together, talks to both and shares data between them
- Rails also uses a router (`routes.rb`) sitting between the user requests and the controllers that respond to those requests

![MVC Diagram](https://raw.githubusercontent.com/tborsa/LighthouseLabs/master/lectures/Week7/Day3/Lecture/assets/mvc-rails.png)

### Rails Libraries
- Rails is a framework made up of a collection of libraries
- **Active Record**
  - An Object Relational Mapper (ORM)
  - Allows you to query and modify the application data in an intuitive way
- **Action View**
  - Handles template lookup and rendering
  - Provides helpers for building forms and other UI elements
- **Action Controller**
  - Controller library
  - Controller's make sense of the request and decide what should be returned to the client
- **Action Dispatch**
  - The Rails router
  - Handles incoming requests and forwards them to the correct controller
- **Action Cable**
  - Websockets for Rails

### Nested Routes
* We define the nesting in our routes. In routes.rb:

```ruby
resources :authors do
  resources :books
end
```

* Will generate:

```sh
author_books      GET    /authors/:author_id/books(.:format)          books#index
                  POST   /authors/:author_id/books(.:format)          books#create
new_author_book   GET    /authors/:author_id/books/new(.:format)      books#new
edit_author_book  GET    /authors/:author_id/books/:id/edit(.:format) books#edit
author_book       GET    /authors/:author_id/books/:id(.:format)      books#show
                  PATCH  /authors/:author_id/books/:id(.:format)      books#update
                  PUT    /authors/:author_id/books/:id(.:format)      books#update
                  DELETE /authors/:author_id/books/:id(.:format) 
```

* Notice that these routes will be affected by the `books` Controller. All the logic will go there to work with these nested routes.
* There are some nice helpful path helpers that get generated by this nested resource stuff. If you look at rake routes, you'll see the prefixes for these under PREFIX. For example, the path `/authors/5/books` could be generated by calling `author_books(@author)`.

### Useful Links
- [react-rails gem](https://github.com/reactjs/react-rails)
- [`dotenv` for Rails](https://github.com/bkeepers/dotenv)

#### Some notes borrowed from Travis' [lecture](https://github.com/tborsa/lectures/blob/master/week10/day1/notes.md) and Vas' [lecture](https://web.compass.lighthouselabs.ca/activities/433/lectures/3022)
